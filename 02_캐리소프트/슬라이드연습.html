<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>캐리 페이드 슬라이드 자바스크립트</title>
  <style>
    *{margin:0 auto; padding:0;}
    header{width:80%; height:100px; background:#ffe;}
    #wrap{position: relative;}
    .slideBg1{padding-top:20%; 
        position: absolute;
        width:100%;
        background-position: center center;
        background-size: cover;
        top:100px;
        opacity: 0;
        z-index: -999;
    }
    .slideBg2{padding-top:20%; 
        position: absolute;
        width:100%;
        background-position: center center;
        background-size: cover;
        top:100px;
        z-index: -9999999;
    }
    
    #slide{padding-top:20%; 
        
        position: relative;
    }
    .slide_title{
        position:absolute;
        left:50%;
        top:50%;
        transform: translate(-50%, -50%);
        opacity: 1;
        font-size: 5rem;
        font-weight: bold;
    }
   
    #content{ width:80%; background:#aee;
        height:500px;
    }

    .slideBg1.on{
        animation: fade 3s forwards;
    }

    @keyframes fade {
        0%{opacity:0;}
        30%{opacity:1;}
        70%{opacity:1;}
        100%{opacity:0;}
    }
    

  </style>
</head>
<body>
<div id="wrap">
  <header>해더</header>
  <div id="slide">
      <div class="slide_title">
          방가방가
      </div>
  </div>
  <div class="slideBg1"></div>
  <div class="slideBg2"></div>
  <div id="content">
     컨텐츠
  </div>
</div>
</body>
<script>
    var i = 0;
    var j = 1;
    var imgUrl = [
                    "http://www.carriesoft.com/wp-content/uploads/2018/07/ch-10-dougie-1024x640.jpg", //0
                    "http://www.carriesoft.com/wp-content/uploads/2018/07/ch-05-stella-1024x640.jpg", //1
                    "http://www.carriesoft.com/wp-content/uploads/2018/07/ch-09-momo-1024x640.jpg",   //2
                    "http://www.carriesoft.com/wp-content/uploads/2018/07/ch-11-julie-1024x641.jpg"   //3
                  ];
    var slide1 = document.querySelector(".slideBg1");
    var slide2 = document.querySelector(".slideBg2");
    slide1.style.backgroundImage = "url(" + imgUrl[i] + ")";
    slide2.style.backgroundImage = "url(" + imgUrl[j] + ")";

    
    
    setInterval(go, 3000);
    setTimeout(nextGo, 1000);

    function nextGo(){
        setInterval(() => {

            if(j<imgUrl.length-1){ // i = 0, 1 , 2 일때 실행
                j++; // 1, 2, 3 까지 카운트
            }else{
                j = 0;
            }

            slide2.style.backgroundImage = "url(" + imgUrl[j] + ")";

        }, 3000);
    }
    
    function go(){

        slide1.classList.add("on");

        if(i<imgUrl.length-1){ // i = 0, 1 , 2 일때 실행
            i++; // 1, 2, 3 까지 카운트
        }else{
            i = 0;
        }
       
        slide1.style.backgroundImage = "url(" + imgUrl[i] + ")";


        setTimeout(function(){
            slide1.classList.remove("on");
        },2900);

    }



</script>
</html>